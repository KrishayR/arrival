<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Arrival</title>
    <link rel="stylesheet" href="assets/style.css" />
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Anton&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <h1>Arrival</h1>
    <br /><br /><br />
    <h2 style="text-align: center">Where do you want to go?</h2>
    <div id="second" style="display: none;">
      <p>Distance needed to travel: <span id="distance"> </span></p>
      <p>Time needed to travel: <span id="duration"> </span></p>
      <iframe
        id="frame"
        width="450"
        height="250"
        frameborder="0"
        style="border:0"
        referrerpolicy="no-referrer-when-downgrade"
        allowfullscreen
      >
      </iframe>
      <!-- <iframe src="https://www.google.com/maps/embed?pb=!1m28!1m12!1m3!1d50736.456395972455!2d-122.06649209073645!3d37.3655019301203!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!4m13!3e6!4m5!1s0x808fb67f6408f839%3A0x43957e403121df7c!2sCupertino%20High%20School%2C%2010100%20Finch%20Ave%2C%20Cupertino%2C%20CA%2095014!3m2!1d37.3194272!2d-122.0092298!4m5!1s0x808fb7a4cb6e427b%3A0xcaba2b02c88e6005!2sAspiration%20Dome%2C%201081%20Innovation%20Way%2C%20Sunnyvale%2C%20CA%2094089!3m2!1d37.409984699999995!2d-122.0309987!5e0!3m2!1sen!2sus!4v1664059116877!5m2!1sen!2sus" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe> -->
      <script src="js/maps.js"></script>
      <!-- <iframe id="" src="https://www.google.com/maps/embed?pb=!1m28!1m12!1m3!1d101485.8392644412!2d-122.11807100915289!3d37.355942506064544!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!4m13!3e6!4m5!1s0x808fb7a4cb6e427b%3A0xcaba2b02c88e6005!2sJuniper%20Networks%20Aspiration%20Dome%2C%20Innovation%20Way%2C%20Sunnyvale%2C%20CA!3m2!1d37.409984699999995!2d-122.0309987!4m5!1s0x808fb50f5803be31%3A0xe0e0a6aa3d42b208!2s20020%20Lynton%20Ct%2C%20Cupertino%2C%20CA%2095014!3m2!1d37.311866099999996!2d-122.02663609999999!5e0!3m2!1sen!2sus!4v1664051486809!5m2!1sen!2sus" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe> -->
    </div>
    <br />
    <div id="first">
      <div>
        <form>
          <label
            style="font-family: hk-grotesk; text-align: center; color: white;"
            for="fname"
            >Start Destination</label
          >
          <input
            id="start"
            type="text"
            name="firstname"
            placeholder="Enter place, zipcode, or address"
          />

          <label
            style="font-family: hk-grotesk; text-align: center; color: white;"
            for="lname"
            >End Destination</label
          >
          <input
            id="end"
            type="text"
            name="lastname"
            placeholder="Enter place, zipcode, or address"
          />
        </form>
        <input id="submit" type="submit" value="Submit" onclick="getInput()" />
      </div>
    </div>

    <script src="js/maps.js"></script>
    <!-- <script src = "maps.html"> </script> -->
    <script>
      $("#first").show();
      $("#second").hide();
      var start;
      var end;

      function getInput(input) {
        start = document.getElementById("start").value;
        start = start.replace(/ /g, "+");
        end = document.getElementById("end").value;
        end = end.replace(/ /g, "+");
        // window.open('maps.html', '_blank');
        console.log(start);
        //   console.log("https://maps.googleapis.com/maps/api/distancematrix/json?origins=" + start + "&destinations="+ end +"&key=AIzaSyBSlzBIzOb80D8vHfZw93mBnZt5Vv2NFRQ");
        sendRequest();
        $("#first").hide();
        $("#second").show();
      }

      function sendRequest() {
        $.ajax({
          url:
            "https://maps.googleapis.com/maps/api/distancematrix/json?origins=" +
            start +
            "&destinations=" +
            end +
            "&key=AIzaSyBSlzBIzOb80D8vHfZw93mBnZt5Vv2NFRQ",
          success: getTraffic,
          failure: e => console.log(e)
        });
        console.log(
          "https://maps.googleapis.com/maps/api/distancematrix/json?origins=" +
            start +
            "&destinations=" +
            end +
            "&key=AIzaSyBSlzBIzOb80D8vHfZw93mBnZt5Vv2NFRQ"
        );
        document.getElementById('frame').setAttribute('src', "https://www.google.com/maps/embed/v1/directions?key=AIzaSyBSlzBIzOb80D8vHfZw93mBnZt5Vv2NFRQ&origin=" +
        start +
        "&destination=" +
        end);
        console.log("https://www.google.com/maps/embed/v1/directions?key=AIzaSyBSlzBIzOb80D8vHfZw93mBnZt5Vv2NFRQ&origin=" +
        start +
        "&destination=" +
        end);
      }

      function getTraffic(response) {
        console.log(response);
        // $("#duration").html(response[rows[0[distance[text]])
        $("#duration").html(response.rows[0].elements[0].duration.text);
        // $("#distance").html(response.rows.elements.distance.text);
        $("#distance").html(response.rows[0].elements[0].distance.text);
      }

      // https://www.google.com/maps/embed/v1/directions
      //   ?key=YOUR_API_KEY
      //   &origin=Oslo+Norway
      //   &destination=Telemark+Norway
      //   &avoid=tolls|highways

      // debugger;
    </script>
  </body>
</html>
